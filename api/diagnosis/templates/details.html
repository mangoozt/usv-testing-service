<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="{% static 'css/materialize.min.css' %}" media="screen,projection"/>
    <title>ASTS Inc.</title>
    <link rel="icon" href="{% static 'images/icon.ico' %}">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
{% load django_bootstrap_breadcrumbs %}
{% block breadcrumbs %}
    {% breadcrumb "Home" "/" %}
    {% breadcrumb "Результаты тестирования" "" %}
{% endblock %}
{% render_breadcrumbs "breadcrumbs.html" %}
<div class="container">
    <h3 class="header">{% block title %}Результаты тестирования{% endblock %}</h3>

    {% block details %}
        <div class="row">
            <div class="col m9">
                <table>
                    <tr>
                        <th>Кейс:</th>
                        <td>{{ title }}</td>
                    </tr>
                    <tr>
                        <th>Дата:</th>
                        <td>{{ date }}</td>
                    </tr>
                    <tr>
                        <th>SHA1:</th>
                        <td>{{ sha1 }}</td>
                    </tr>
                    <tr>
                        <th>Количество целей:</th>
                        <td> {{ n_targ }}</td>
                    </tr>
                    <tr>
                        <th>Общее количество тестов:</th>
                        <td>{{ n_sc }}</td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы F2F, процент решенных:</th>
                        <td>{{ solv_tr.0 }}; <b>{{ percent.0 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Overtaken, процент решенных:</th>
                        <td>{{ solv_tr.1 }}; <b>{{ percent.1 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Overtake, процент решенных:</th>
                        <td>{{ solv_tr.2 }}; <b>{{ percent.2 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Give way, процент решенных:</th>
                        <td>{{ solv_tr.3 }}; <b>{{ percent.3 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Save, процент решенных:</th>
                        <td>{{ solv_tr.4 }}; <b>{{ percent.4 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Give way priority, процент решенных:</th>
                        <td>{{ solv_tr.5 }}; <b>{{ percent.5 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Save priority, процент решенных:</th>
                        <td>{{ solv_tr.6 }}; <b>{{ percent.6 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Cross move, процент решенных:</th>
                        <td>{{ solv_tr.7 }}; <b>{{ percent.7 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Cross in, процент решенных:</th>
                        <td>{{ solv_tr.8 }}; <b>{{ percent.8 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Vision restricted forward, процент решенных:</th>
                        <td>{{ solv_tr.9 }}; <b>{{ percent.9 }}%</b></td>
                    </tr>
                    <tr>
                        <th>Решенные кейсы Vision restricted backward, процент решенных:</th>
                        <td>{{ solv_tr.10 }}; <b>{{ percent.10 }}%</b></td>
                    </tr>
                </table>
            </div>
            <div class="col m3">
                <div class="collection">
                    <a href="{{ statistics_file.url }}" class="collection-item">Файл статистики</a>
                    <a href="{{ img }}" class="collection-item">График</a>
                    <a href="{{ img_min }}" class="collection-item">График в режиме министра</a>
                </div>
            </div>
        </div>
    {% endblock %}

</div>
<div id="graph"></div>
<script type="text/javascript">
    google.charts.load('current', {'packages': ['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        const chart_data = {{ chart_data|safe }};
        const data = google.visualization.arrayToDataTable(chart_data);
        const options = {
            title: '',
            hAxis: {title: 'Дистанция', titleTextStyle: {color: '#333'}},
            vAxis: {minValue: 0, title: 'Процент'},
            width: '100%',
            height: 700
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart'));
        chart.draw(data, options);

        function resizeChart() {
            chart.draw(data, options);
        }

        if (document.addEventListener) {
            window.addEventListener('resize', resizeChart);
        } else if (document.attachEvent) {
            window.attachEvent('onresize', resizeChart);
        } else {
            window.resize = resizeChart;
        }
    }
</script>
<div id="chart" style="width: 100%; height: 800px;"></div>
<script type="text/javascript" src="{% static 'js/materialize.min.js' %}"></script>
</body>
</html>